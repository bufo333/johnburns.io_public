<!DOCTYPE html>
<html lang=""><head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <title>GnuPG Cheat Sheet</title>
    <meta name="description" content="The desk of my mind.">
    <meta name="author" content='John Burns'>

    <link href="https://fonts.googleapis.com/css2?family=Inconsolata:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" integrity="sha512-iBBXm8fW90+nuLcSKlbmrPcLa0OT92xO1BIsZ+ywDWZCvqsWgccV3gFoRBv0z+8dLJgyAHIhR35VZc2oM/gI1w==" crossorigin="anonymous">

    
    <link rel="stylesheet" href="/sass/researcher.min.css">

    
        <link rel="icon" type="image/ico" href="https://johnburns.io/favicon.ico">
    

    
        
<script async src="https://www.googletagmanager.com/gtag/js?id=G-LQNL2E5MEL"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-LQNL2E5MEL', { 'anonymize_ip': false });
}
</script>

    
</head>

    <body><div class="container mt-5">
    <nav class="navbar navbar-expand-sm flex-column flex-sm-row text-nowrap p-0">
        <a class="navbar-brand mx-0 mr-sm-auto" href="https://johnburns.io/" title="The Colour of My Thoughts">
          
          The Colour of My Thoughts
        </a>
        <div class="navbar-nav flex-row flex-wrap justify-content-center">
            
                
                
                    <a class="nav-item nav-link" href="/about/" title="About">
                        About
                    </a>
                    
                        <span class="nav-item navbar-text mx-1">/</span>
                    
                
                    <a class="nav-item nav-link" href="/resume.pdf" title="Resume">
                        <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-file-earmark-person-fill" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M2 2a2 2 0 0 1 2-2h5.293A1 1 0 0 1 10 .293L13.707 4a1 1 0 0 1 .293.707V14a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V2zm7.5 1.5v-2l3 3h-2a1 1 0 0 1-1-1zM11 8a3 3 0 1 1-6 0 3 3 0 0 1 6 0zm2 5.755S12 12 8 12s-5 1.755-5 1.755V14a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1v-.245z"/></svg> Resume
                    </a>
                    
                        <span class="nav-item navbar-text mx-1">/</span>
                    
                
                    <a class="nav-item nav-link" href="/contact/" title="Contact">
                        Contact
                    </a>
                    
                
            
        </div>
    </nav>
</div>
<hr>
<div id="content">
<div class="container">
    <h2 id="gnupg-cheatsheet">GnuPG Cheatsheet</h2>
<p>Quick list of the most common GnuPG commands that I need most often. Encrypt, decrypt, signing, key management, key servers, and special features.</p>
<h3 id="encrypt-and-decrypt">Encrypt and decrypt</h3>
<h4 id="encrypt-a-file-with-your-key">Encrypt a file with your key</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">gpg -er me@example.org diary.txt
</span></span></code></pre></div><!--list-separator-->
<ul>
<li>
<p>Options</p>
<p><strong>-r</strong> encrypts the file for the user specified as argument. The output is written to <strong>diary.txt.gpg</strong>.</p>
</li>
</ul>
<h4 id="encrypt-a-file-for-another-person">Encrypt a file for another person</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">gpg -er alice@example.org diary.txt
</span></span></code></pre></div><h4 id="encrypt-a-file-with-passphrase">Encrypt a file with passphrase</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">gpg -c diary.txt
</span></span></code></pre></div><h4 id="decrypt-a-file">Decrypt a file</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">gpg -do diary.txt diary.txt.gpg
</span></span></code></pre></div><h3 id="encrypt-and-sign">Encrypt and sign</h3>
<h4 id="encrypt-a-file-and-sign-with-your-key">Encrypt a file and sign with your key</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">gpg -esr alice@example.orge diary.txt
</span></span></code></pre></div><p>Sign and encrypt the file, output is written to <strong>diary.txt.gpg</strong>.</p>
<h4 id="decrypt-and-verify-a-file">Decrypt and verify a file</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">gpg -do diary.txt diary.txt.gpg
</span></span></code></pre></div><h4 id="signing-and-verification">Signing and verification</h4>
<!--list-separator-->
<ul>
<li>Signing compresses the file and append a signature.</li>
</ul>
<h3 id="signing">Signing</h3>
<h4 id="sign-a-file">Sign a file</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">gpg -s diary.txt
</span></span></code></pre></div><p>The signature is written to <strong>diary.txt.gpg</strong>.</p>
<h4 id="verify-a-signature">Verify a signature</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">gpg --verify diary.txt.gpg
</span></span></code></pre></div><h4 id="verify-a-signature-and-restore-the-file">Verify a signature and restore the file</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">gpg -do diary.txt diary.txt.gpg
</span></span></code></pre></div><p><strong>-d</strong> is for decryption, this works for signature files as well.</p>
<h4 id="special-forms-of-signing">Special forms of signing</h4>
<p>With <strong>clearsign</strong>, the output is wrapped in an ASCII-armored signature.</p>
<!--list-separator-->
<ul>
<li>
<p>Clearsign a file</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">gpg --clearsign diary.txt
</span></span></code></pre></div><p>The signature is written to <strong>diary.txt.asc</strong>.</p>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Verify a clearsign signature</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">gpg --verify diary.txt.asc
</span></span></code></pre></div></li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Verify a signature and restore the file</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">gpg -do diary.txt diary.txt.asc
</span></span></code></pre></div><p><strong>-d</strong> is for decryption, this works for signature files as well.</p>
<p><strong>Detached signatures</strong> are just signatures without any data</p>
</li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>sign a file using detached signature</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">gpg -o diary.txt.sig --detach-sig diary.txt
</span></span></code></pre></div></li>
</ul>
<!--list-separator-->
<ul>
<li>
<p>Verify a detached signature</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">gpg --verify diary.txt.sig diary.txt
</span></span></code></pre></div></li>
</ul>
<h3 id="public-key-management">Public key management</h3>
<h4 id="list-all-public-keys-in-keyring">List all public keys in keyring</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">gpg -k
</span></span></code></pre></div><h4 id="export-a-public-key">Export a public key</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">gpg -ao alice\_pub.asc --export alice@example.org
</span></span></code></pre></div><h4 id="import-a-public-key">Import a public key</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">gpg --import alice\_pub.asc
</span></span></code></pre></div><h4 id="verify-a-public-key-fingerprint">Verify a public key fingerprint</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">gpg --fingerprint alice@example.org
</span></span></code></pre></div><h3 id="secret-key-management">Secret key management</h3>
<h4 id="generate-key-pair--rsa-dsa-ecc-like-curve-25519">Generate key pair (RSA,DSA, ECC like Curve 25519)</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">gpg --expert --full-gen-key
</span></span></code></pre></div><p>Using <strong>expert mode</strong> for key generation enables the choice of different key types.</p>
<h4 id="edit-secret-key">Edit secret key</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">gpg --expert --edit-key me@example.org
</span></span></code></pre></div><!--list-separator-->
<ul>
<li>Most interesting commands:
<table>
<thead>
<tr>
<th>adduid</th>
<th>Create an additional user ID</th>
</tr>
</thead>
<tbody>
<tr>
<td>revuid</td>
<td>Revoke a user ID or photographic user ID</td>
</tr>
<tr>
<td>primary</td>
<td>Flag the current user id as the primary one</td>
</tr>
<tr>
<td>addkey</td>
<td>Add a subkey to this key</td>
</tr>
<tr>
<td>expire</td>
<td>Change the key or subkey expiration time</td>
</tr>
<tr>
<td>passwd</td>
<td>Change the passphrase of the secret key</td>
</tr>
<tr>
<td>save</td>
<td>Save all changes to the keyrings and quit</td>
</tr>
</tbody>
</table>
</li>
</ul>
<h4 id="list-all-secret-keys">List all secret keys</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">gpg -K
</span></span></code></pre></div><h4 id="generate-revocation-certificate">Generate revocation certificate</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">gpg -ao revoke-key.asc --gen-revoke A767285029E8882A
</span></span></code></pre></div><h3 id="deleting-keys">Deleting keys</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">gpg --delete-secret-key A767285029E8882A
</span></span><span class="line"><span class="cl">gpg --delete-key A767285029E8882A
</span></span></code></pre></div><p>Make sure you have published a revocation certificate, if your key was uploaded to a key server!</p>
<h3 id="signing-parties">Signing parties</h3>
<h4 id="show-the-public-key-fingerprint">Show the public key fingerprint</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">gpg --fingerprint 00AA11BB22CC33DD
</span></span></code></pre></div><h4 id="sign-a-public-key">Sign a public key</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">gpg --sign-key 00AA11BB22CC33DD
</span></span></code></pre></div><h4 id="list-keys-with-signatures">List keys with signatures</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">gpg --list-sigs
</span></span></code></pre></div><h4 id="generate-fingerprint-paper-slips">Generate fingerprint paper slips</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">gpg-key2latex --show-qrcode 00AA11BB22CC33DD
</span></span></code></pre></div><h3 id="key-servers">Key servers</h3>
<h4 id="send-public-key-to-a-keyserver">Send public key to a keyserver</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">gpg --keyserver hkp://pgp.mit.edu --send-keys A767285029E8882A
</span></span></code></pre></div><p><span class="underline"><em>Remember it&rsquo;s not possible to remove a key from any keyserver!</em></span></p>
<h4 id="get-public-key-from-a-keyserver">Get public key from a keyserver</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">gpg --keyserver hkp://pgp.mit.edu --recv-key A767285029E8882A
</span></span></code></pre></div><h4 id="search-public-key-on-a-keyserver">Search public key on a keyserver</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">gpg --keyserver hkp://pgp.mit.edu --search-keys Alice
</span></span></code></pre></div><h4 id="refresh-all-keys-from-keyserver">Refresh all keys from keyserver</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">gpg --keyserver hkp://pgp.mit.edu --refresh-keys
</span></span></code></pre></div><p><strong>Useful for updating a key with the latest signatures, user IDs, etc. Calling this with no
arguments will refresh the entire keyring.</strong></p>
<h3 id="fancy-features">Fancy features</h3>
<h4 id="export-ssh-compatible-public-key">Export SSH compatible public key</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">gpg --export-ssh-key me@example.org
</span></span></code></pre></div><p>Export a key in the OpenSSH public key format. You need a subkey for authentication purposes <strong>[A]</strong>.</p>
<h4 id="get-keygrip">Get keygrip</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">gpg --list-secret-keys --with-keygrip
</span></span></code></pre></div><p>The keygrip can be put in <strong>~/.gnupg/sshcontrol</strong> to use GnuPG for ssh authentication.</p>
<h4 id="export-subkeys">Export subkeys</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">gpg -o my\_subkey.gpg --export-secret-subkey F988A393A99DB2F3!
</span></span></code></pre></div><p>Export only one or more subkeys for a stripped keyring. Remember the required <strong>!</strong> at the end.</p>
<h4 id="update-trust-db">Update trust db</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">gpg --update-trustdb
</span></span></code></pre></div>
</div>

        </div><div id="footer" class="mb-5">
    <hr>
    
    <div class="container text-center">
        
            <a href="https://twitter.com/" class="fab fa-twitter fa-1x" title="Twitter"></a>
        
            <a href="mailto:john@techinvasion.net" class="fas fa-envelope fa-1x" title="E-mail"></a>
        
    </div>
    
    
        <div class="container text-center">
            <a href="https://github.com/bufo333/" title="By John Burns"><small>By John Burns</small></a>
        </div>
    
</div>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1329465157209102"
    crossorigin="anonymous"></script>
    </body>
</html>
